% Setup spaces between column
\setlength{\tabcolsep}{2pt}

%Complete Contexts &
%$\cctx$ & \syndef & $\ctxinit \mid \ctx,x \mid \ctx,x:\tau \mid \ctx,x:\tau=\tau_2$ \\
%&& \synor & $\ctx,\genA=\tau$ \\

% ------------------------------------------------------------------------
% TYPING RULES
% ------------------------------------------------------------------------

\newcommand*{\TAx}{\inferrule{ }{\preinf \star:\star \toctxo}\rname{T-Ax}}
\newcommand*{\TVar}{\inferrule{x:\tau \in \ctx}{\preinf x:\tau \toctxo
  }\rname{T-Var}}
\newcommand*{\TLetVar}{\inferrule{x:\sigma = \tau \in \ctx \\ \preinst \sigma \lt \tau_2 \toctx}{\preinf x:\tau_2 \toctx
  }\rname{T-LetVar}}
\newcommand*{\TSub}{\inferrule{\preinf e : \tau_1 \toctx_1 \\ \ctxl_1 \byuni [\ctxl_1]\tau_1
    \lt [\ctxl_1]\tau_2 \toctx}{\prechk e:\tau_2 \toctx }\rname{T-Sub}}
\newcommand*{\TAnn}{\inferrule{\prechk \tau:\star \toctx_1 \\
    \ctxl_1 \bychk e:\tau \toctx }{\preinf (e:\tau):\tau \toctx
  }\rname{T-Ann}}
\newcommand*{\TLamInf}{\inferrule{\preinf[,\genA,x:\genA]
    e:\tau_2 \toctx, x:\genA, \ctxr }{\preinf \erlam x e : (\bpi x \genA
    [\ctxr]\tau_2) \toctx, UV(\ctxr) }\rname{T-Lam$\Inf$}}
\newcommand*{\TLamChk}{\inferrule{\prechk[,x:\tau_1]
    e:\tau_2 \toctx,x:\tau_1,\ctxr \\
    \opt{\prechk {\tau_1 : \star \toctx_1 }}
    }{\prechk \erlam x e : \bpi x {\tau_1}
    \tau_2 \toctx }\rname{T-Lam$\Chk$}}
\newcommand*{\TLamAnnInf}{\inferrule{\prechk \tau_1 : \star \toctx_1\\
    \ctxl_1,x:\tau_1 \byinf
    e:\tau_2 \toctx, x:\tau_1, \ctxr }{\preinf \blam x {\tau_1} e : (\bpi x {\tau_1}
    [\ctxr]\tau_2) \toctx, UV(\ctxr) }\rname{T-LamAnn$\Inf$}}
\newcommand*{\TLamAnnChk}{\inferrule{\prechk \tau_1 : \star \toctx_1\\
    \ctxl_1 \byuni [\ctxl_1] \tau_1 \lt [\ctxl_1] \tau_3 \toctx_2 \\
    \ctxl_2,x:\tau_1 \bychk
    e:\tau_2 \toctx, x:\tau_1, \ctxr }
    {\prechk \blam x {\tau_1} e : (\bpi x {\tau_3} \tau_2) \toctx }\rname{T-LamAnn$\Chk$}}
\newcommand*{\TApp}{\inferrule{
    \preinf e_1 : \tau_1 \toctx_1 \\
    \ctxl_1 \byapp [\ctxl_1]\tau_1~e_2 : \tau_2 \toctx \\
}{\preinf e_1~e_2:\tau_2 \toctx}\rname{T-App}}
\newcommand*{\TAppPi}{\inferrule{
    \preinf e_1 : \bpi x {\tau_1} \tau_2 \toctx_1 \\
    \ctxl_1 \bychk e_2 : [\ctxl_1]\tau_1 \toctx \\
}{\preinf e_1~e_2:\tau_2 \subst x
    {e_2} \toctx}\rname{T-AppPi}}
\newcommand*{\TAppVar}{\inferrule{
    \preinf e_1 : \genA \toctx_1[\genA] \\
    \ctxl_1[\genA_1,\genA_2,\genA=\bpi x {\genA_1} \genA_2] \bychk e_2 : \genA_1 \toctx \\
}{\preinf e_1~e_2:\genA_2 \toctx}\rname{T-AppVar}}
\newcommand*{\TPi}{\inferrule{\prechk \tau_1 : \star \toctx_1 \\
\ctxl_1,x:\tau_1 \bychk \tau_2 : \star \toctx,x:\tau_1,\ctxr}{\preinf \bpi x {\tau_1} {\tau_2} :
    \star \toctx }\rname{T-Pi}}
\newcommand*{\TLet}{\inferrule{\preinf e_1 : \tau_1 \toctx_1  \\
\ctxl_1 \bygen {\tau_1} \lt \sigma \\
\ctxl_1, x:\sigma = e_1 \byall e_2 : \tau_2 \toctx, x:\sigma = e_1, \ctxr }{\preall \kw{let} x=e_1
\kw{in} e_2 : [x:\sigma=e_1, \ctxr]\tau_2 \toctx, UV(\ctxr) }\rname{T-Let}}
\newcommand*{\TCastUp}{\inferrule{[\ctx]\tau_2
    \redto \tau_1 \\
    \prechk e : \tau_1 \toctx \\
    \opt{\prechk \tau_1 : \star \toctx_1}
    }
  {\prechk \ercastup e : \tau_2 \toctx
    }\rname{T-CastUp}}
\newcommand*{\TCastDn}{\inferrule{\preinf e : \tau_1 \toctx \\
    [\ctxl]\tau_1 \redto \tau_2}{\preinf \castdn e : \tau_2
    \toctx }\rname{T-CastDn}}

% DECLARATIVE

\newcommand*{\DAx}{\inferrule{ }{\preinf \star:\star \trto \star}\rname{D-Ax}}
\newcommand*{\DVar}{\inferrule{x:\tau \in \ctx}{\preinf x:\tau
  \trto x}\rname{D-Var}}
\newcommand*{\DLetVar}{\inferrule{x:\sigma = \tau \in \ctx \\ \preinst \sigma \lt \tau_2 \trto f}{\preinf x:\tau_2
  \trto {f~x}}\rname{D-LetVar}}
\newcommand*{\DSub}{\inferrule{\preinf e : \tau \trto{t}}
  {\prechk e:\tau  \trto{t}}\rname{D-Sub}}
\newcommand*{\DAnn}{\inferrule{\prechk \tau:\star \\
    \ctx \bychk e:\tau  \trto t}{\preinf (e:\tau):\tau
  \trto t}\rname{D-Ann}}
\newcommand*{\DLamInf}{\inferrule{ \prechk \tau_1 : \star \trto {t_1} \\ \preinf[,x:\tau_1]
    e:\tau_2 \trto {t_2}}{\preinf \erlam x e : (\bpi x {\tau_1} {\tau_2})
    \trto {\blam x {t_1} {t_2}}}\rname{D-Lam$\Inf$}}
\newcommand*{\DLamChk}{\inferrule{\prechk[,x:\tau_1]
    e:\tau_2 \trto {t_2} \\
    \opt{\prechk {\tau_1 : \star  \trto {t_1}}}
    }{\prechk \erlam x e : (\bpi x {\tau_1} \tau_2)  \trto {\blam x {t_1} t_2}}\rname{D-Lam$\Chk$}}
\newcommand*{\DLamAnnInf}{\inferrule{\prechk \tau_1 : \star
    \trto {t_1} \\
    \ctx,x:\tau_1 \byinf
    e:\tau_2\trto {t_2}}{\preinf \blam x {\tau_1} e : (\bpi x {\tau_1}
    \tau_2) \trto {\blam x {t_1} t_2}}\rname{D-LamAnn$\Inf$}}
\newcommand*{\DLamAnnChk}{\inferrule{
    \ctx,x:\tau_1 \bychk
    e:\tau_2\trto {t_2}}{\prechk \blam x {\tau_1} e : (\bpi x {\tau_1}
    \tau_2) \trto {\blam x {t_1} t_2}}\rname{D-LamAnn$\Chk$}}
\newcommand*{\DApp}{\inferrule{
    \preinf e_1 : \bpi  x {\tau_1} {\tau_2} \trto {t_1} \\
    \prechk e_2 : \tau_1 \trto {t_2}
}{\preinf e_1~e_2:\tau_2 \subst x {e_2}  \trto {t_1~t_2}}\rname{D-App}}
\newcommand*{\DPi}{\inferrule{\prechk \tau_1 : \star \trto {t_1} \\
\ctx,x:\tau_1 \bychk \tau_2 : \star \trto {t_2}}{\preinf \bpi x {\tau_1} {\tau_2} :
    \star \trto {\bpi x {t_1} t_2}}\rname{D-Pi}}
\newcommand*{\DLet}{\inferrule{\pregen e_1 : \sigma \trto {t_1} \\
\ctx, x:\sigma = e_1 \byall e_2 : \tau_2 \trto {t_2}}{\preall \kw{let} x=e_1
\kw{in} e_2 : \tau_2 \subst x {e_1} \trto {\kw{let} x = t_1 \kw{in} t_2}}\rname{D-Let}}
\newcommand*{\DCastUp}{\inferrule{\tau_2 \redto \tau_1 \\
    \prechk e : \tau_1 \trto {t_2} \\
    \opt{\prechk \tau_1 : \star \trto {t_1}}
    }
  {\prechk \ercastup e : \tau_2
    \trto {\castup {t_1} t_2}}\rname{D-CastUp}}
\newcommand*{\DCastDn}{\inferrule{\preinf e : \tau_1\trto t \\
    \tau_1 \redto \tau_2}{\preinf \castdn e : \tau_2
    \trto {\castdn t}}\rname{D-CastDn}}
\newcommand*{\DConv}{\inferrule{\preinf e_1 : \tau_1 \trto t \\ [\ctx]\tau_1 = [\ctx]\tau_2}
    {\preinf e_1 : \tau_2 \trto t}\rname{D-Conv}}

\newcommand*{\DPoly}{\inferrule{\prechk[x:\star] \sigma : \star \trto {t}}
{\preinf \forall x:\star. \sigma : \star \trto {\bpi x \star t}}\rname{D-Poly}}

\newcommand*{\DInstantiation}{\inferrule{\prechk \overbar{\tau} : \star \trto {\overbar t} \\
\sigma = \forall{\overbar{x:\star}}. \tau_1 \\
\opt{\prechk \sigma : \star \trto{t_1}}
}
{\preinst \sigma \lt \tau_1[\overbar{x} \mapsto \overbar{\tau}] \trto {\blam x {t_1} x ~ \overbar{t}}
} \rname{D-Inst}}

\newcommand*{\DGeneralization}{\inferrule{ \preinf[, \overbar{x:\star}] e : \tau \trto {t_1}
\\  \overbar x \notin FV(e)}
{\pregen e : \forall \overbar{x:\star}. \tau
\trto {(\blam {x_1} \star {\blam {x_2} \star {... \blam {x_n} \star {t_1}}})}} \rname{D-Gen}}

% ------------------------------------------------------------------------
% UNIFICATION RULES
% ------------------------------------------------------------------------

\newcommand*{\UVar}{\inferrule{ }{\preuni[{[x]}] x \lt x \toctxo[x]}\rname{U-Var}}
\newcommand*{\UEVarId}{\inferrule{ }{\preuni[{[\genA]}] \genA \lt \genA \toctxo[\genA]}\rname{U-EVarId}}
\newcommand*{\UEVarTy}{\inferrule{\genA \not \in \fun{FV}(\tau_1) \\ \ctx[\genA] \bycg \tau_1 \cgto \tau_2 \toctx_1, \genA, \ctxl_2 \\ \ctxl_1 \bywt \tau_2}
{\ctx[\genA] \byuni \genA \lt \tau_1 \toctx_1, \genA=\tau_2, \ctxl_2}\rname{U-EvarTy}}
\newcommand*{\UTyEVar}{\inferrule{\genA \not \in \fun{FV}(\tau_1) \\ \ctx[\genA] \bycg \tau_1 \cgto \tau_2 \toctx_1, \genA, \ctxl_2 \\ \ctxl_1 \bywt \tau_2}
{\ctx[\genA] \byuni \tau_1 \lt \genA \toctx_1, \genA=\tau_2, \ctxl_2}\rname{U-TyEVar}}
\newcommand*{\UStar}{\inferrule{ }{\preuni \star \lt \star \toctxo}\rname{U-Star}}
\newcommand*{\UApp}{\inferrule{\preuni \tau_2 \lt \tau_2' \toctx_1 \\
    \ctxl_1 \byuni [\ctxl_1]\tau_1 \lt [\ctxl_1]\tau_1'
    \toctx}{\preuni \tau_1~\tau_2 \lt \tau_1'~\tau_2'
    \toctx}\rname{U-App}}
\newcommand*{\ULam}{\inferrule{\preuni[,x] \tau \lt \tau'
    \toctx,x,\ctxr}{\preuni \erlam x \tau \lt \erlam x \tau' \toctx}\rname{U-Lam}}
\newcommand*{\ULamAnn}{\inferrule{\preuni \tau_1 \lt \tau_3 \toctx_1 \\
    \ctxl_1, x:\tau_1 \byuni [\ctxl_1]\tau_2 \lt [\ctxl_1]\tau_4
    \toctx,x:\tau_1,\ctxr}{\preuni \blam x {\tau_1} \tau_2 \lt \blam x
    {\tau_3} \tau_4 \toctx}\rname{U-LamAnn}}
\newcommand*{\UPi}{\inferrule{\preuni \tau_1' \lt \tau_1 \toctx_1
    \\ \ctxl_1,x:\tau_1 \byuni [\ctxl_1]\tau_2 \lt [\ctxl_1]\tau_2'
    \toctx,x:\tau_1,\ctxr}{\preuni \bpi x {\tau_1} \tau_2 \lt \bpi x
    {\tau_1'} \tau_2' \toctx}\rname{U-Pi}}
\newcommand*{\ULet}{\inferrule{\preuni \tau_1 \lt \tau_1' \toctx_1
    \\ \ctxl_1, x \byuni {[\ctxl_1]}\tau_2 \lt [\ctxl_1]\tau_2'
    \toctx, x, \ctxr}{\preuni \kw{let} x ={\tau_1} \kw{in} \tau_2 \lt \kw{let} x=
    {\tau_1'} \kw{in} \tau_2' \toctx}\rname{U-Let}}
\newcommand*{\UCastUp}{\inferrule{\preuni \tau \lt \tau'
    \toctx}{\preuni \ercastup \tau \lt \ercastup \tau' \toctx}\rname{U-CastUp}}
\newcommand*{\UCastDn}{\inferrule{\preuni \tau \lt \tau'
    \toctx}{\preuni \castdn \tau \lt \castdn \tau' \toctx}\rname{U-CastDn}}
\newcommand*{\UAnn}{\inferrule{\preuni \tau \lt \tau' \toctx_1 \\
    \ctxl_1 \byuni [\ctxl_1]e \lt [\ctxl_1]e'
    \toctx}{\preuni e:\tau \lt e':\tau'
    \toctx}\rname{U-Ann}}

% ------------------------------------------------------------------------
% APPLICATION RULES
% ------------------------------------------------------------------------

\newcommand*{\APi}{\inferrule{\prechk e:\tau_1 \toctx \trto t}{\preapp (\bpi x
    {\tau_1} \tau_2)~e : \tau_2[x \mapsto e] \toctx \trto t}\rname{A-Pi}}
\newcommand*{\AEVar}{\inferrule{\prechk[{[\genA_2,\genA_1,\genA=\bpi x
    {\genA_1} \genA_2]}] e : \genA_1 \toctx \trto t}{\preapp[{[\genA]}]
  \genA~e : \genA_2 \toctx \trto t}\rname{A-EVar}}

% ------------------------------------------------------------------------
% TARGET TYPING RULES
% ------------------------------------------------------------------------

\newcommand*{\EAx}{\inferrule{ }{\pretar \star:\star }\rname{E-Ax}}
\newcommand*{\EVar}{\inferrule{x:s \in \tctx}{\pretar x:s}\rname{E-Var}}
\newcommand*{\EApp}{\inferrule{\pretar t_1:\bpi x {s_1} {s_2} \\ \pretar
    t_2:s_1}{\pretar t_1~t_2:s_2 \subst
  x {t_2}}\rname{E-App}}
\newcommand*{\ELam}{\inferrule{\pretar t_1:\star \\ \pretar[,x:t_1] t_2:s_1
    }{\pretar \blam
    x {t_1} t_2 : \bpi x {t_1} {s_1}}\rname{E-Lam}}
\newcommand*{\EPi}{\inferrule{\pretar t_1:\star \\ \pretar[,x:t_1] t_2:\star }{\pretar \bpi x {t_1} t_2 :
    \star}\rname{E-Pi}}
\newcommand*{\ECastUp}{\inferrule{\pretar t_1 : \star \\ \pretar t_2: s_1 \\ t_1 \redto s_1 }{\pretar \castup {t_1} {t_2} :t_1}\rname{E-CastUp}}
\newcommand*{\ECastDown}{\inferrule{\pretar t_1 : s_1 \\ s_1 \redto s_2 }{\pretar \castdn t_1 :s_2}\rname{E-CastDown}}
\newcommand*{\ELet}{\inferrule{\pretar t_1 : s_1 \\ \pretar[,x:s_1=t_1] t_2:s_2}{\pretar \kw{let} x = t_1 \kw{in} t_2: s_2}\rname{E-Let}}
\newcommand*{\EConv}{\inferrule{\pretar t_1 : s_1 \\ [\tctx]s_1 = [\tctx]s_2}{\pretar t_1 : s_2}\rname{E-Conv}}

% ------------------------------------------------------------------------
% POLYMORPHISM
% ------------------------------------------------------------------------

\newcommand*{\Instantiation}{\inferrule{\sigma = \forall{\overbar{x:\star}}. \tau}{\preinst \sigma \lt \tau[\overbar{x} \mapsto \overbar{\genA}] \toctx, \overbar{\genA}} \rname{Inst}}

\newcommand*{\Generalization}{\inferrule{\tau_2 = [\ctx]\tau \\ \overbar{\genA} = FV(\tau_2) - FV(\ctx)}{\pregen \tau \lt \forall \overbar{x:\star}. \tau_2[\overbar{\genA} \mapsto \overbar{x}]} \rname{Gen}}

% ------------------------------------------------------------------------
% UNIFY TVAR
% ------------------------------------------------------------------------

\newcommand*{\IVar}{\inferrule{ }{\ctx \bycg x \cgto x \toctxo}\rname{I-Var}}
\newcommand*{\IStar}{\inferrule{ }{\ctx \bycg \star \cgto \star \toctxo}\rname{I-Star}}
\newcommand*{\IEVarA}{\inferrule{ }{\ctx[\genB][\genA] \bycg \genB \cgto \genB \toctxo[\genB][\genA]}\rname{I-EVar1}}
\newcommand*{\IEVarB}{\inferrule{ }{\ctx[\genA][\genB] \bycg \genB \cgto \genA_1 \toctxo[\genA_1, \genA][\genB=\genA_1]}\rname{I-EVar2}}
\newcommand*{\IOthers}{\inferrule{\ctx \bycg \tau_0 \cgto \tau_0' \toctx_1 \\ \ctxl_i \bycg [\ctxl_i]\tau_i \cgto \tau_i' \toctx_{i+1}}{\ctx \bycg T\ \overbar{\tau_n} \cgto T\ \overbar{\tau_n'}}\rname{I-Other}}

% ------------------------------------------------------------------------
% WELL FORM
% ------------------------------------------------------------------------

\newcommand*{\WFPoly}{\inferrule{ \prewt[,x:\star] \sigma}{ \prewt \forall x: \star. \sigma}\rname{WF-Poly}}
\newcommand*{\WFOther}{\inferrule{ \prechk \tau : \star}{ \prewt \tau}\rname{WF-Other}}

\newcommand*{\TWFEVar}{\inferrule{\genA \in \ctx }{\prewt \genA}\rname{WF-EVar}}
\newcommand*{\TWFPi}{\inferrule{\prewt \tau_1 \\ \prewt \tau_2 }{\prewt \bpi x {\tau_1} {\tau_2}}\rname{WF-Pi}}
\newcommand*{\TWFPoly}{\WFPoly}
\newcommand*{\TWFOther}{\inferrule{ \prechk \tau : \star \toctx}{ \prewt \tau}\rname{WF-Other}}

\newcommand*{\WCEmpty}{\inferrule{ }{\ctxinit \wc}\rname{WC-Empty}}
\newcommand*{\WCVar}{\inferrule{\ctx \wc \\ x \notin dom(\ctx)}{\ctx, x \wc}\rname{WC-Var}}
\newcommand*{\WCTypedVar}{\inferrule{\ctx \wc \\ x \notin dom(\ctx) \\ \ctx \bywt \tau}{\ctx, x: \tau \wc}\rname{WC-TypedVar}}
\newcommand*{\WCLetVar}{\inferrule{\ctx \wc \\ x \notin dom(\ctx) \\ \ctx \bywt \sigma \\ \sigma = \forall {\overbar {y:\star}}.\tau \\ \prechk[,\overbar{y:\star}] e:\tau}
{\ctx, x:\sigma = e}\rname{WC-LetVar}}

\newcommand*{\TWCEmpty}{\WCEmpty}
\newcommand*{\TWCVar}{\WCVar}
\newcommand*{\TWCTypedVar}{\WCTypedVar}
\newcommand*{\TWCLetVar}{\inferrule{\ctx \wc \\ x \notin dom(\ctx) \\ \ctx \bywt \sigma \\ \sigma = \forall {\overbar {y:\star}}.\tau \\ \prechk[,\overbar{y:\star}] e:\tau\toctx}
{\ctx, x:\sigma = e}\rname{WC-LetVar}}
\newcommand*{\TWCEVar}{\inferrule{\ctx \wc \\ \genA \notin dom(\ctx)}{\ctx, \genA \wc}\rname{WC-EVar}}
\newcommand*{\TWCSolvedEVar}{\inferrule{\ctx \wc \\ \genA \notin dom(\ctx) \\ \ctx \bywt \tau}{\ctx, \genA = \tau \wc}\rname{WC-SolvedEVar}}

% ------------------------------------------------------------------------
% TRANSLATION CONTEXT
% ------------------------------------------------------------------------

\newcommand*{\TCEmpty}{\inferrule{ } {\ctxinit \trtop \ctxinit}\rname{TC-Empty}}
\newcommand*{\TCTypedVar}{\inferrule{\ctx \trtop \tctx \\ \prechk \tau : \star \trtop t} {\ctx, x:\tau \trtop \tctx, x:t}\rname{TC-TypedVar}}
\newcommand*{\TCLetVar}{\inferrule{\ctx \trtop \tctx \\ \prechk \sigma : \star \trtop t_1 \\ \pregen \tau : \sigma \trtop t_2
} {\ctx, x:\sigma = \tau \trtop \tctx, x:t_1 = t_2}\rname{TC-LetVar}}

% ------------------------------------------------------------------------
% CONTEXT EXTENSION
% ------------------------------------------------------------------------

\newcommand*{\CEEmtpy}{\inferrule{  }{\ctxinit \exto \ctxinit}\rname{CE-Empty}}
\newcommand*{\CEVar}{\inferrule{\ctx \exto \ctxr}{\ctx, x \exto \ctxr, x}\rname{CE-Var}}
\newcommand*{\CETypedVar}{\inferrule{\ctx \exto \ctxr \\ [\ctxr]\tau_1 = [\ctxr]\tau_2}{\ctx, x:\tau_1 \exto \ctxr, x:\tau_2}\rname{CE-TypedVar}}
\newcommand*{\CELetVar}{\inferrule{\ctx \exto \ctxr \\ [\ctxr]\tau_1 = [\ctxr]\tau_3 \\ [\ctxr]\tau_2 = [\ctxr]\tau_4}{\ctx, x:\tau_1=\tau_2 \exto \ctxr, x:\tau_3 = \tau_4}\rname{CE-LetVar}}
\newcommand*{\CEEVar}{\inferrule{ }{\ctx, \genA \exto \ctxr, \genA}\rname{CE-EVar}}
\newcommand*{\CESolvedEVar}{\inferrule{\ctx \exto \ctxr \\ [\ctxr]\tau_1 = [\ctxr]\tau_2}{\ctx, \genA = \tau_1 \exto \ctxr, \genA = \tau_2}\rname{CE-SolvedEVar}}
\newcommand*{\CESolve}{\inferrule{\ctx \exto \ctxr \\ \prechk \tau : \star}{\ctx, \genA \exto \ctxr, \genA = \tau}\rname{CE-Solve}}
\newcommand*{\CEAdd}{\inferrule{\ctx \exto \ctxr}{\ctx, \genA \exto \ctxr, \genA}\rname{CE-Add}}
\newcommand*{\CEAddSolved}{\inferrule{\ctx \exto \ctxr \\ \prechk \tau : \star}{\ctx \exto \ctxr, \genA:\tau}\rname{CE-AddSolved}}

% ------------------------------------------------------------------------
% REFERENCE OF ORIGINAL SYSTEM
% ------------------------------------------------------------------------

\newcommand*{\OLamInf}{\inferrule{\prechk[,\genA,\genB,x:\genA]
    e:\genB \toctx, x:\genA, \ctxr}{\preinf \erlam x e : (\bpi x \genA
    \genB) \toctx}\rname{$\rightarrow$ I $\Rightarrow$}}

\newcommand*{\OInstLArr}{\inferrule{\preuni[{[\genA_2, \genA_1, \genA = \genA_1 \to \genA_2]}] \genA_1 \lt A_1 \toctx_1 \\
    \ctxl_1 \byuni [\ctxl_1]A_2 \lt \genA_2 \toctx} {\preuni[{[\genA]}] \genA \lt A_1 \to A_2 \toctx}\rname{InstLArr}}

\newcommand*{\OInstLSolve}{\inferrule{\ctx \bywt \tau}{\ctx, \genA, \ctx' \byuni \genA \lt \tau \toctxo, \genA = \tau, \ctx'}\rname{InstLSolve}}

\newcommand*{\OInstLReach}{\inferrule{ }{\preuni[{[\genA][\genB]}] \genA \lt \genB \toctxo[\genA][\genB=\genA]}\rname{InstLReach}}

% ------------------------------------------------------------------------
% OPERATIONAL SEMANTICS
% ------------------------------------------------------------------------

\newcommand*{\SBetaA}{\inferrule{ }{(\blam x \tau {e_1}) e_2 \redto e_1 \subst x {e_2} }\rname{S-Beta1}}
\newcommand*{\SBetaB}{\inferrule{ }{(\erlam x {e_1}) e_2 \redto e_1 \subst x {e_2}}\rname{S-Beta2}}
\newcommand*{\SApp}{\inferrule{ e_1 \redto e_1' }{e_1~e_2 \redto e_1'~e_2}\rname{S-App}}
\newcommand*{\SCastDownUp}{\inferrule{  }{\castdn (\ercastup e) \redto e}\rname{S-CastDownUp}}
\newcommand*{\SCastDown}{\inferrule{e \redto e'}{\castdn e \redto \castdn e'}\rname{S-CastDown}}
\newcommand*{\SLet}{\inferrule{ }{\kw{let} x = e_1 \kw{in} e_2 \redto e_2 \subst x {e_1}}\rname{S-Let}}
\newcommand*{\SAnn}{\inferrule{e \redto e'}{ e:\tau \redto e':\tau}\rname{S-Ann}}

% ------------------------------------------------------------------------
% EXAMPLES
% ------------------------------------------------------------------------

\newcommand*{\ExUni}{\inferrule{\genA \notin FV(\bpi x \genB x) \quad
                                       \inferrule{\inferrule{ }
                                                            {\ctx,\genA,\genB,\ctxr \bycg \genB \cgto \genA_1 \toctx}\rname{I-Evar2}
                                                  \quad
                                                  \inferrule{ }
                                                            {\ctxl \bycg x \cgto x \toctx}\rname{I-Var}}
                                                 {\ctx,\genA,\genB,\ctxr \bycg \bpi x \genB x \cgto \bpi x {\genA_1} x \toctx}\rname{I-Other}
                                      \quad
                                      \inferrule{ %\inferrule{ }{\ctx,\genA_1 \bywt \genA_1}\rname{WF-EVar} \quad \inferrule{ }{\ctx,\genA_1,x \bywt x}\rname{WF-Var}
                                                 }
                                                {\ctx,\genA_1 \bywt \bpi x {\genA_1} x}\rname{WF-Pi}}
                               {\ctx,\genA,\genB,\ctxr \byuni \genA \lt \bpi x \genB x \toctxo, \genA_1, \genA=\bpi x {\genA_1} x, \genB=\genA_1, \ctxr} \rname{U-EvarTy}}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../main"
%%% End:
